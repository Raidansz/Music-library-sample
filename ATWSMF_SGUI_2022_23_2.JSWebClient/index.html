








<!DOCTYPE html>
<html>

<head>
    <title>Fetch Songs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }

        h1 {
            text-align: center;
            margin: 2rem 0;
        }

        .form-container {
            width: 80%;
            margin: 0 auto;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

            .form-container h2 {
                text-align: center;
                margin-bottom: 1rem;
            }

        .form-group {
            margin-bottom: 1rem;
        }

            .form-group label {
                display: block;
                font-weight: bold;
            }

            .form-group input[type="text"] {
                width: 100%;
                padding: 0.5rem;
                border: 1px solid #ddd;
                border-radius: 4px;
            }

        .button-container {
            text-align: center;
        }

            .button-container button {
                margin-right: 1rem;
            }

        table {
            width: 80%;
            margin: 2rem auto;
            background-color: #fff;
            border-collapse: collapse;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        th,
        td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f7f7f7;
            font-weight: bold;
            color: #333;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
    <script>
        const apiUrl = "http://localhost:4671/api/Song";

        function fetchSongs() {
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const songsTable = document.getElementById("songs-table");
                    data.forEach((song, index) => {
                        const row = createSongRow(song, index);
                        songsTable.appendChild(row);
                    });
                })
                .catch(error => {
                    console.log("Error fetching songs:", error);
                });
        }

        function createSongRow(song, index) {
            const row = document.createElement("tr");
            row.dataset.songId = song.id;

            const nameCell = document.createElement("td");
            nameCell.textContent = song.name || "N/A";
            row.appendChild(nameCell);

            const durationCell = document.createElement("td");
            durationCell.textContent = song.duration || "N/A";
            row.appendChild(durationCell);

            const albumCell = document.createElement("td");
            albumCell.textContent = song.album && song.album.name ? song.album.name : "N/A";
            row.appendChild(albumCell);

            const actionsCell = document.createElement("td");
            const deleteButton = document.createElement("button");
            deleteButton.textContent = "Delete";
            deleteButton.addEventListener("click", deleteSong);
            actionsCell.appendChild(deleteButton);
            row.appendChild(actionsCell);

            row.classList.add("fade-in");
            row.style.animationDelay = `${index * 0.1}s`;

            return row;
        }

        function addSong() {
            const name = document.getElementById("song-name").value.trim();
          /*  const duration = document.getElementById("song-duration").value.trim();*/
           /* const album = document.getElementById("song-album").value.trim();*/

            if (!name /*|| !duration*/ /*|| !album*/) {
                alert("Please fill in all fields.");
                return;
            }
            const song = {
                Name: name,
               /* Duration: duration*/
            };
            //const song = {
            //    name,
            //    duration,
            //    album: { name }
            //};

            fetch(apiUrl, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(song)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const songsTable = document.getElementById("songs-table");
                        const row = createSongRow(data.song, songsTable.childElementCount);
                        songsTable.appendChild(row);
                        clearForm();
                    } else {
                        alert("Failed to add the song.");
                    }
                })
                .catch(error => {
                    console.log("Error adding song:", error);
                    alert("Failed to add the song.");
                });
        }

        function deleteSong(event) {
            const row = event.target.parentNode.parentNode;
            const songId = row.dataset.songId;

            fetch(`${apiUrl}/${songId}`, {
                method: "DELETE"
            })
                .then(response => {
                    if (response.ok) {
                        row.remove();
                    } else {
                        console.log("Error deleting song:", response.status);
                        alert("Failed to delete the song.");
                    }
                })
                .catch(error => {
                    console.log("Error deleting song:", error);
                    alert("Failed to delete the song.");
                });
        }

        function clearForm() {
            document.getElementById("song-name").value = "";
            document.getElementById("song-duration").value = "";
            document.getElementById("song-album").value = "";
        }
    </script>
</head>

<body>
    <h1>Songs</h1>
    <div class="form-container">
        <h2>Add Song</h2>
        <div class="form-group">
            <label for="song-name">Name:</label>
            <input type="text" id="song-name" required>
        </div>
        <div class="form-group">
            <label for="song-duration">Duration:</label>
            <input type="text" id="song-duration" required>
        </div>
        <div class="form-group">
            <label for="song-album">Album:</label>
            <input type="text" id="song-album" required>
        </div>
        <div class="button-container">
            <button onclick="addSong()">Add Song</button>
            <button onclick="clearForm()">Clear</button>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Duration</th>
                <th>Album</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="songs-table"></tbody>
    </table>

    <script>
        fetchSongs();
    </script>
</body>

</html>
